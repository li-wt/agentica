# 🧠 Agentica 智能任务拆分 Web 应用

## 📝 应用概述

这是一个基于 Agentica 框架开发的智能任务拆分 Web 应用，能够自动识别用户意图，将复杂任务拆分为可执行的子任务，并协调多个专业 Agent 完成任务。

## 🌟 核心特性

### 🧠 智能处理流程
1. **意图识别** - 自动分析用户需求的复杂度和类型
2. **任务拆分** - 将复杂任务分解为可执行的步骤
3. **智能调度** - 根据步骤需求选择合适的专业 Agent
4. **结果整合** - 统一输出完整、结构化的最终答案

### 🎯 处理模式
- **🧠 智能模式**: 自动识别任务复杂度，选择最佳处理方式
- **⚡ 简单模式**: 直接处理简单任务，快速响应
- **🧩 拆分模式**: 强制使用任务拆分，适用于复杂分析

### 🛠️ 工具集成
- **🧮 计算器**: 数学计算和公式求解
- **🌤️ 天气查询**: 获取实时天气信息
- **🔍 网络搜索**: 搜索最新信息和资料
- **📁 文件操作**: 读写文件、管理文档
- **🎲 随机工具**: 生成随机数、随机选择
- **📝 文本处理**: 文本分析、信息提取
- **💻 代码执行**: Python 代码编写和运行

## 🚀 快速开始

### 环境要求
- Python 3.10+
- LocalChat 模型服务运行在 `http://27.159.93.62:8087/v1`

### 安装依赖
```bash
# 激活虚拟环境
source venv/bin/activate

# 安装必要依赖
pip install streamlit agentica sqlalchemy lancedb pyarrow text2vec
```

### 启动应用
```bash
# 启动 Web 应用
streamlit run web_chat_app.py --server.port 8501 --server.address 0.0.0.0
```

### 访问应用
打开浏览器访问: `http://192.168.2.2:8501`

## 💡 使用指南

### 简单任务示例
- "计算 25 * 36 + 180 的结果"
- "生成 5 个 1-100 之间的随机数"
- "分析这段文本的统计信息"
- "今天北京的天气怎么样？"

### 复杂任务示例
- "分析人工智能在医疗领域的应用现状和发展趋势"
- "制定一个月的健身减肥计划，包括饮食和运动安排"
- "研究比特币价格影响因素并预测未来走势"
- "比较 Python 和 Java 的优缺点并推荐学习路径"

### 特殊指令
- `@Recent Changes` - 查看最近的会话变更记录
- `@Help` - 显示详细的帮助信息

## 🧩 任务拆分机制

### 自动识别复杂任务
系统会自动识别以下类型的复杂任务：
- 包含"分析...并...预测"的需求
- 制定各类计划的请求
- 研究应用现状的需求
- 比较优缺点的分析
- 调研报告类需求
- 详细介绍包括多方面的任务

### 智能任务拆分流程
1. **意图分析阶段**
   - 识别核心意图和目标
   - 判断任务类型和复杂度
   - 确定所需专业领域知识
   - 设定成功标准

2. **任务规划阶段**
   - 将复杂任务分解为子任务
   - 识别任务间依赖关系
   - 选择合适的工具和方法
   - 规划执行顺序

3. **协同执行阶段**
   - 研究专家：信息收集和分析
   - 计算专家：数据分析和计算
   - 写作专家：内容创作和优化
   - 工具专家：使用专业工具

4. **结果整合阶段**
   - 整合各步骤执行结果
   - 生成完整结构化答案
   - 确保符合原始需求

## 🔧 配置选项

### 侧边栏设置
- **处理模式选择**: 智能/简单/拆分模式
- **工具选择**: 根据需求启用相应工具
- **高级设置**: 调试模式、意图显示、自动拆分

### 连接状态
- **LocalChat 模型**: 检查本地模型服务状态
- **API 密钥**: 各种服务的连接状态

## 📊 使用场景

### 🎓 教育学习
- 制定学习计划和课程安排
- 知识点深入分析和解释
- 多角度比较分析问题

### 💼 商业分析
- 市场调研和竞争分析
- 趋势预测和风险评估
- 商业策略制定

### 🔬 科研工作
- 文献调研和资料整理
- 数据分析和结果解释
- 研究方案设计

### 📈 数据分析
- 复杂计算和统计分析
- 数据可视化和报告生成
- 预测模型构建

## 🎯 最佳实践

### 提问技巧
1. **明确目标**: 清楚描述你想要达成的目标
2. **提供背景**: 给出必要的背景信息和约束条件
3. **指明范围**: 说明分析的范围和深度要求
4. **期望格式**: 如需特定格式的输出，请明确说明

### 任务描述示例
```
# ✅ 好的任务描述
"请帮我制定一个为期一个月的减肥健身计划，我是25岁女性，目前体重65公斤，目标减重5公斤，每天可用于锻炼的时间是1小时，希望包含运动安排和饮食建议。"

# ❌ 不好的任务描述  
"帮我减肥"
```

## 🔍 故障排除

### 常见问题
1. **LocalChat 连接失败**
   - 检查模型服务是否运行在 `http://27.159.93.62:8087/v1`
   - 确认网络连接正常

2. **任务拆分失败**
   - 检查任务描述是否清晰明确
   - 尝试使用简单模式处理

3. **工具调用失败**
   - 检查相应 API 密钥是否配置
   - 确认工具权限设置

### 日志查看
应用运行时会在终端显示详细日志，包括：
- 意图识别结果
- 任务拆分过程
- Agent 执行状态
- 错误信息和调试信息

## 📚 技术架构

### 核心组件
- **IntentClassifier**: 意图识别和复杂度判断
- **SmartTaskDecomposer**: 智能任务分解工作流
- **专业 Agent 团队**: 研究、计算、写作、工具专家
- **SpecialCommandHandler**: 特殊指令处理

### 数据存储
- **SQLite 数据库**: 会话历史和 Agent 状态
- **LanceDB 向量库**: 知识库和文档存储
- **本地文件系统**: 临时文件和输出结果

## 🤝 贡献指南

欢迎为这个项目做出贡献！您可以：
- 报告 Bug 和问题
- 提出新功能建议
- 改进文档和示例
- 优化算法和性能

## 📄 许可证

本项目遵循 MIT 许可证，详情请参见 LICENSE 文件。

---

🎉 **开始您的智能任务处理之旅吧！**

如有任何问题或建议，请随时联系我们。 